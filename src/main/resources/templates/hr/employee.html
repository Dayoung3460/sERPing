<!DOCTYPE html>
<html layout:decorate="~{layouts/layout}" lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    
    <!-- TOAST UI Library -->
    <link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
    <script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/hr/style.css}">
    
    <title>사원 관리</title>
</head>

<body layout:fragment="content">

<div class="container mt-3">
    <div class="row">
        <div class="col">
            <h2>사원 관리</h2>
        </div>
    </div>

    <!-- 사원 검색 영역 -->
	<!-- 검색 필터 영역 -->
	<div class="search-box bg-light p-3 rounded shadow-sm">
	    <!-- 검색 기준 & 검색어 -->
	    <div class="row align-items-center">
	        <div class="col-md-2 text-end"><label class="fw-bold">검색 기준</label></div>
	        <div class="col-md-3">
	            <select class="form-select" id="searchCategory">
	                <option value="전체">전체</option>
	                <option value="employeeName">사원명</option>
	                <option value="employeeId">사원ID</option>
	                <option value="phone">연락처</option>
	            </select>
	        </div>
	        <div class="col-md-5">
	            <input type="text" class="form-control" placeholder="검색어 입력" id="searchKeyword">
	        </div>
	    </div>
	
	    <!-- 부서 & 하위 부서 -->
	    <div class="row align-items-center">
	        <div class="col-md-2 text-end"><label class="fw-bold">부서</label></div>
	        <div class="col-md-4">
	            <select class="form-select" id="searchDepartment">
	                <option value="">선택</option>
	            </select>
	        </div>
	        <div class="col-md-2 text-end"><label class="fw-bold">하위 부서</label></div>
	        <div class="col-md-4">
	            <select class="form-select" id="searchSubDepartment">
	                <option value="">선택</option>
	            </select>
	        </div>
	    </div>
	
	    <!-- 직급 -->
	    <div class="row align-items-center">
	        <div class="col-md-2 text-end"><label class="fw-bold">직급</label></div>
	        <div class="col-md-6">
	            <select class="form-select" id="searchPosition">
	                <option value="">선택</option>
	            </select>
	        </div>
	    </div>
	
	    <!-- 재직 상태 -->
	    <div class="row align-items-center">
	        <div class="col-md-2 text-end"><label class="fw-bold">재직 상태</label></div>
	        <div class="col-md-8">
	            <div class="btn-group w-100" role="group" id="statusGroup"></div>
	        </div>
	    </div>
	
	    <!-- 근무 유형 -->
	    <div class="row align-items-center">
	        <div class="col-md-2 text-end"><label class="fw-bold">근무 유형</label></div>
	        <div class="col-md-8">
	            <div class="btn-group w-100" role="group" id="employmentTypeGroup"></div>
	        </div>
	    </div>
	
	    <!-- 조회 & 초기화 버튼 -->
	    <div class="row">
	        <div class="col text-center">
	            <button class="btn btn-primary me-2" onclick="searchEmployees()" id="searchBtn">조회</button>
	            <button class="btn btn-outline-success" onclick="resetFilters()">초기화</button>
	        </div>
	    </div>
	</div>


    <!-- 사원 검색 영역 끝 -->

    <!-- 토스트 그리드 영역 -->
    <div class="row mt-3">
        <div class="col">
            <div id="grid"></div>
            <div id="pagination" class="tui-pagination"></div>
        </div>
    </div>

    <!-- 버튼 영역 -->
    <div class="row mt-3">
        <div class="col text-start">
            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#empRegisterModal" onclick="openEmployeeForm()">사원 등록</button>
            <button class="btn btn-danger" onclick="deleteEmployee()">삭제</button>
        </div>
    </div>
</div>

<!-- 사원 관리 및 Toast Grid 설정 -->
<script src="/js/hr/employee.js"></script>
<script src="/js/hr/common-codes.js"></script>

<div th:insert="~{hr/emp_register_modal :: empRegisterModal}"></div>

</body>
</html>
