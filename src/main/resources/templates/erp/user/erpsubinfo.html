<!DOCTYPE html>
 <!-- =======================================================
 * ERP 사용 회사의 구독 정보를 확인 한다
 * @author 개발팀 표하연
 * @since 2025.02.20
 * @version 1.0
 * @see
 *
 * <pre>
 * << 개정이력(Modification Information) >>
 *
 *   수정일      수정자          수정내용
 *  -------    --------    ---------------------------
 *  2025.02.20  표하연          최초 생성
 *
 *  </pre>
 ======================================================== -->
<html layout:decorate="~{layouts/layout}"
      lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<body layout:fragment="content">
	<style>
		#custom-container{
	        background-color: #f8f9fa; /* 연한 회색 배경 /
	        padding: 20px;
	        border-radius: 10px;
	        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); / 박스 그림자 */
	        margin-bottom: 20px;
			font-weight: bold;
			text-align: center;
			font-size: 26px;
	    }
	</style>
	<div class="container">
		<div class="row">
			<div class="h3 pb-2 mb-2 text-black border-bottom border-secondary">
				구독현황
			</div>
			<div id="custom-container">
				<div class="d-flex">
					<div class="p-1 flex-fill">
						<div class="d-flex">
							<div class="p-1 flex-fill bg-primary-subtle">
								구독형태
							</div>
							<div class="p-1 flex-fill border border-primary-subtle border-2">
								<span id=subObj></span>
							</div>
						</div>
					</div>
					<div class="p-1 flex-fill">
						<div class="d-flex">
							<div class="p-1 flex-fill bg-primary-subtle">
								남은기간
							</div>
							<div class="p-1 flex-fill border border-primary-subtle border-2">
								<span id="subObjdate"></span>
							</div>
						</div>
					</div>
					<div class="p-1 flex-fill">
						<div class="d-flex">
							<div class="p-1 flex-fill bg-primary-subtle">
								만료일
							</div>
							<div class="p-1 flex-fill border border-primary-subtle border-2">
								<span id="subObjdateDay"></span>
							</div>
						</div>
					</div>
				</div>
				<div class="d-flex justify-content-between" style="font-size: 20px;">
					<div class="d-flex flex-column mb-3">
						<div class="p-1 bg-primary-subtle">유형</div>
						<div class="p-1 bg-primary-subtle">남은기간</div>
						<div class="p-1 bg-primary-subtle">만료일</div>
					</div>
					<div class="d-flex flex-column mb-3">
						<div class="p-1">Flex item 1</div>
						<div class="p-1">Flex item 2</div>
						<div class="p-1">Flex item 3</div>
					</div>
					<div class="d-flex flex-column mb-3">
						<div class="p-1">Flex item 1</div>
						<div class="p-1">Flex item 2</div>
						<div class="p-1">Flex item 3</div>
					</div>
					<div class="d-flex flex-column mb-3">
						<div class="p-1">Flex item 1</div>
						<div class="p-1">Flex item 2</div>
						<div class="p-1">Flex item 3</div>
					</div>
					<div class="d-flex flex-column mb-3">
						<div class="p-1">Flex item 1</div>
						<div class="p-1">Flex item 2</div>
						<div class="p-1">Flex item 3</div>
					</div>
				</div>
			</div>
			<div class="col-md-6 mt-2 mb-2">
				<div class="row">
					<label class="col-sm-4">상품명</label> 
					<input type="text" class="col-sm-5" id="goodsName">
					<button type="button" class="col-sm-2" onclick="search()">검색</button>
				</div>
			</div>
			<div class="col-md-6 mt-2 mb-2">
				<div class="row">
					<div class="col-sm-1"></div>
					<label class="col-sm-4">주문 지점</label> 
					<input type="text"class="col-sm-7" id="branchOfficeId">
				</div>
			</div>
			<div class="col-md-12 mt-2 mb-5">
				<div class="row">
					<label class="col-sm-2">비고</label> 
					<input type="text"class="col-sm-10" id="remark">
				</div>
			</div>
			<div class="col-md-12 stretch-card mt-3 mb-5">
				<div class="card">
					<div class="card-body">
						<h6 class="mb-4">요청서 작성</h6>
						<div id="returning"></div>
						<div id="pagination" class="tui-pagination"></div>
						<div style="text-align : center">
							<button onclick="returnInsert()">등록</button>
							<button onclick="reset()">초기화</button>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-6 stretch-card mt-2 mb-2">
				<div class="card">
					<div class="card-body">
						<h6 class="mb-4">보유 상품</h6>
						<div id="housegoods"></div>
						<div id="pagination" class="tui-pagination"></div>
					</div>
				</div>
			</div>
			<div class="col-md-6 stretch-card mt-2 mb-2">
				<div class="card">
					<div class="card-body">
						<h6 class="mb-4">상품별 옵션</h6>
						<div id="option"></div>
						<div id="pagination" class="tui-pagination"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script th:inline="javascript">
		setTimeout(async () => {
			console.log("여기는 사용하는곳:", window.subscriptionState);
			let subObj = document.querySelector("#subObj");
			let subObjdate = document.querySelector("#subObjdate");
			let subObjdateDay = document.querySelector("#subObjdateDay");
			
			//subObj
			if(window.subscriptionState.subObj=="date"){
				subObj.innerHTML = "기간구독";
			}else{
				subObj.innerHTML = "정기구독";
			}
			//subObjdate //subObjdateDay
			if(window.subscriptionState.subObjdate && window.subscriptionState.subObjdate != 0){
				//만료 남은 기간
				subObjdate.innerHTML = window.subscriptionState.subObjdate+"일";
				//만료일자
				let today = new Date();
				today.setDate(today.getDate()+window.subscriptionState.subObjdate);
				let result = today.toISOString().split("T")[0];
				subObjdateDay.innerHTML = result;
			}else{
				subObjdate.innerHTML = "만료";
				subObjdateDay.innerHTML = "-";
			}
		}, 500);
	</script>
</body>