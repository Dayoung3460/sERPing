<!DOCTYPE html>
<html
        layout:decorate="~{layouts/layout}"
        lang="en"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:sec=""
>
<head>
    <meta charset="UTF-8">
    <title>결재문서</title>

    <!-- TOAST UI Editor CSS -->
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />
    <link rel="stylesheet" href="https://uicdn.toast.com/editor-plugin-table-merged-cell/latest/toastui-editor-plugin-table-merged-cell.min.css" />

    <!-- TOAST UI Editor JS -->
    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
    <script src="https://uicdn.toast.com/editor-plugin-table-merged-cell/latest/toastui-editor-plugin-table-merged-cell.min.js"></script>

    <!-- TOAST UI Editor 안정화 버전 (3.2.2) -->
<!--    <link rel="stylesheet" href="https://uicdn.toast.com/editor/3.2.2/toastui-editor.min.css" />-->
<!--    <link rel="stylesheet" href="https://uicdn.toast.com/editor-plugin-table-merged-cell/3.2.2/toastui-editor-plugin-table-merged-cell.min.css" />-->

<!--    <script defer src="https://uicdn.toast.com/editor/3.2.2/toastui-editor-all.min.js"></script>-->
<!--    <script defer src="https://uicdn.toast.com/editor-plugin-table-merged-cell/3.2.2/toastui-editor-plugin-table-merged-cell.min.js"></script>-->

</head>
<body layout:fragment="content">
<h3 class="mb-4">결재문서 관리</h3>

<!--<h2>Editor</h2>-->
<div id="editor"></div>

<!--<h2>Viewer</h2>-->
<!--<div id="viewer"></div>-->

<script>
    const Editor = toastui.Editor;
    const { tableMergedCell } = Editor.plugin;

    const tableContent = `
# 근태 수정 요청서

| 필드명       | 입력 값 |
|-------------|--------|
| **사원번호** | [사원번호 입력] |
| **사원명**  | [사원명 입력] |
| **부서**    | [부서 입력] |
| **수정 요청일** | [YYYY-MM-DD] |
| **기존 출근 시간** | [기존 출근 시간 입력] |
| **기존 퇴근 시간** | [기존 퇴근 시간 입력] |
| **실제 출근 시간** | [실제 출근 시간 입력] |
| **실제 퇴근 시간** | [실제 퇴근 시간 입력] |
| **수정 사유** | [수정 사유 입력] |

---

### 📌 요청 내용
근태 수정 요청 사유를 작성해 주세요.

\`\`\`
[사유 입력]
\`\`\`

---

**📅 작성일:** [YYYY-MM-DD]
`;



    const editor = new Editor({
        el: document.querySelector('#editor'),
        previewStyle: 'vertical',
        height: '500px',
        initialValue: tableContent,
        plugins: [tableMergedCell],
        // plugins: [tableMergedCell()],
        // toolbarItems: [
        //     ['heading', 'bold', 'italic', 'strike'],
        //     ['hr', 'quote'],
        //     ['ul', 'ol', 'task'],
        //     ['table', 'image', 'link'],
        //     ['code', 'codeblock'],
        //     ['mergeCells', 'splitCells']
        // ]
    });

    // const viewer = Editor.factory({
    //     el: document.querySelector('#viewer'),
    //     viewer: true,
    //     height: '500px',
    //     initialValue: tableContent,
    //     plugins: [tableMergedCell]
    // });





















    // document.addEventListener("DOMContentLoaded", function () {
    //     // ✅ 플러그인을 올바른 경로에서 가져오기
    //     const tableMergedCellPlugin = window.toastui.Editor.plugin.tableMergedCell;
    //
    //     if (!tableMergedCellPlugin) {
    //         console.error("❌ `tableMergedCell` 플러그인이 로드되지 않았습니다!");
    //         return;
    //     }
    //
    //
    //     const { Editor } = toastui;
    //     const tableMergedCell = new toastui.Editor.plugin.tableMergedCell();
    //
    //     const tableContent = `
    //         | Header 1 | Header 2 | Header 3 |
    //         |----------|----------|----------|
    //         | A1       | A2       | A3       |
    //         | B1       | B2       | B3       |
    //         `;
    //
    //     const editor = new Editor({
    //         el: document.querySelector('#editor'),
    //         previewStyle: 'vertical',
    //         height: '500px',
    //         initialValue: tableContent,
    //         plugins: [tableMergedCell], // ✅ 플러그인 적용
    //         toolbarItems: [
    //             ['heading', 'bold', 'italic', 'strike'],
    //             ['hr', 'quote'],
    //             ['ul', 'ol', 'task'],
    //             ['table', 'image', 'link'],
    //             ['code', 'codeblock'],
    //             ['mergeCells', 'splitCells'] // ✅ 병합/분할 버튼 추가
    //         ]
    //     });
    // });
</script>
</body>
</html>
