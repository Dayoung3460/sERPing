<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beauty1nside.hr.mapper.EmpContractMapper">

    <!-- ✅ 계약 등록 -->
    <insert id="insertContract" parameterType="com.beauty1nside.hr.dto.EmpContractDTO">
        INSERT INTO HR_EMPLOYEE_CONTRACT (
            CONTRACT_NUM, EMPLOYEE_NUM, COMPANY_NUM, DEPARTMENT_NUM, POSITION, CONTRACT_TYPE,
            CONTRACT_START_DATE, CONTRACT_END_DATE, WORK_LOCATION, JOB_DESCRIPTION, 
            WORK_START_TIME, WORK_END_TIME, BREAK_START_TIME, BREAK_END_TIME,
            PROBATION_PERIOD, CONTRACT_STATUS, REGISTER_DATE, UPDATE_DATE, 
            ANNUAL_SALARY, MONTHLY_SALARY, BONUS, ADDITIONAL_PAY, SALARY_PAYMENT_DATE, 
            PAYMENT_METHOD, ANNUAL_LEAVE_POLICY, SOCIAL_INSURANCE, WORK_DAYS
        ) VALUES (
            HR_EMPLOYEE_CONTRACT_SEQ.NEXTVAL, 
            #{employeeNum}, #{companyNum}, #{departmentNum}, #{position}, #{contractType},
            #{contractStartDate, jdbcType=DATE}, #{contractEndDate, jdbcType=DATE}, #{workLocation}, #{jobDescription},
            #{workStartTime}, #{workEndTime}, #{breakStartTime}, #{breakEndTime},
            #{probationPeriod}, 'CS001', SYSDATE, SYSDATE,
            #{annualSalary}, #{monthlySalary}, #{bonus}, #{additionalPay}, #{salaryPaymentDate}, 
            #{paymentMethod}, #{annualLeavePolicy}, #{socialInsurance}, #{workDays} 
        )
    </insert>

    <!-- ✅ 특정 사원의 최근 계약 조회 -->
    <select id="getLastContract" parameterType="long" resultType="com.beauty1nside.hr.dto.EmpContractDTO">
        SELECT * FROM HR_EMPLOYEE_CONTRACT 
        WHERE EMPLOYEE_NUM = #{employeeNum}
        ORDER BY REGISTER_DATE DESC
        FETCH FIRST 1 ROWS ONLY
    </select>

    <!-- ✅ 전체 계약 목록 조회 -->
    <select id="getAllContracts" resultType="com.beauty1nside.hr.dto.EmpContractDTO">
        SELECT * FROM HR_EMPLOYEE_CONTRACT ORDER BY REGISTER_DATE DESC
    </select>



	
</mapper>