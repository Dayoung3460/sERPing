<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beauty1nside.purchs.mapper.productMapper">
<!-- catelist 카테고리 조회-->
<select id="catelist" resultType="ProductDTO">
select *
from stdr_classification
order by classification_id desc
</select>

<!-- brandlist 브랜드 조회 -->
<select id="brandlist" resultType="ProductDTO">
    SELECT BRAND_ID, BRAND_CODE, BRAND_NAME, COMPANY_NUM
    FROM (
        SELECT /*+index_desc(STDR_BRAND PK_STDR_BRAND)*/
               ROWNUM RN,
               BRAND_ID,
               BRAND_CODE,
               BRAND_NAME,
               COMPANY_NUM
        FROM STDR_BRAND
        <include refid="searchbrandInfo"/>  <!-- 검색 조건 포함 -->

        
    )
    WHERE RN BETWEEN #{start} AND #{end}  <!--  WHERE 수정 -->
    ORDER BY BRAND_ID DESC <!-- ORDER BY 위치  -->
</select>


<!-- 카운트 -->
<select id="brandcount" resultType="int">
	select count(*) from stdr_brand
		<include refid="searchbrandInfo"></include>
</select>

<!--  searchbrandInfo 쿼리 -->
<sql id="searchbrandInfo">
    <where>
    <!-- company_num LIKE '%' || #{companyNum} || '%' -->
        <if test="brandName != null and brandName != ''">
            brand_name LIKE '%' || #{brandName} || '%'
        </if>
    </where>
</sql>


<!-- vendorlist 브랜드 조회 -->
<select id="vendorlist" resultType="ProductDTO">
    SELECT VENDOR_ID, VENDOR_NAME
    FROM (
        SELECT /*+index_desc(STDR_BRAND PK_GRPWR_VENDOR)*/
               ROWNUM RN,
               VENDOR_ID,
               VENDOR_NAME             
        FROM GRPWR_VENDOR
        <include refid="searchVendorInfo"/>  <!-- 검색 조건 포함 -->

        
    )
    WHERE RN BETWEEN #{start} AND #{end}  <!--  WHERE 수정 -->
    ORDER BY VENDOR_ID DESC <!-- ORDER BY 위치  -->
</select>


<!-- 카운트 -->
<select id="vendorcount" resultType="int">
	select count(*) from GRPWR_VENDOR
		<include refid="searchVendorInfo"></include>
</select>

<!--  searchbrandInfo 쿼리 -->
<sql id="searchVendorInfo">
    <where>
    <!-- company_num LIKE '%' || #{companyNum} || '%' -->
        <if test="vendorName != null and vendorName != ''">
            VENDOR_NAME LIKE '%' || #{vendorName} || '%'
        </if>
    </where>
</sql>

<!-- warehouselist  창고 조회 -->
<select id="warehouselist" resultType="ProductDTO">
    SELECT WAREHOUSE_ID, WAREHOUSE_NAME,COMPANY_NUM
    FROM (
        SELECT /*+index_desc(STDR_BRAND PK_STDR_WAREHOUSE)*/
               ROWNUM RN,
               WAREHOUSE_ID,
               WAREHOUSE_NAME,
               COMPANY_NUM
        FROM STDR_WAREHOUSE
        <include refid="searchwarehouseInfo"/>  <!-- 검색 조건 포함 -->

        
    )
    WHERE RN BETWEEN #{start} AND #{end}  <!--  WHERE 수정 -->
    ORDER BY WAREHOUSE_ID DESC <!-- ORDER BY 위치  -->
</select>


<!-- 카운트 -->
<select id="warehousecount" resultType="int">
	select count(*) from STDR_WAREHOUSE
		<include refid="searchwarehouseInfo"></include>
</select>

<!--  searchwarehouseInfo 쿼리 -->
<sql id="searchwarehouseInfo">
    <where>
    <!-- company_num LIKE '%' || #{companyNum} || '%' -->
        <if test="warehouseName != null and warehouseName != ''">
            warehouse_name LIKE '%' || #{warehouse_name} || '%'
        </if>
    </where>
</sql>


</mapper>